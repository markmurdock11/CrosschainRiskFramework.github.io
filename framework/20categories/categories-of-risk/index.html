
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Categories of Risk - Crosschain Risk Framework</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#categories-of-risk" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Crosschain Risk Framework" class="md-header__button md-logo" aria-label="Crosschain Risk Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Crosschain Risk Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Categories of Risk
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Crosschain Risk Framework" class="md-nav__button md-logo" aria-label="Crosschain Risk Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Crosschain Risk Framework
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../01intro/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../10stakeholders/stakeholders/" class="md-nav__link">
        Stakeholders
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Categories of Risk
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Categories of Risk
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-consensus-risk" class="md-nav__link">
    Network Consensus Risk
  </a>
  
    <nav class="md-nav" aria-label="Network Consensus Risk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transaction-finality" class="md-nav__link">
    Transaction Finality
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-liveness-failures" class="md-nav__link">
    Network Liveness Failures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-safety-violations" class="md-nav__link">
    Network Safety Violations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protocol-architecture-risk" class="md-nav__link">
    Protocol Architecture Risk
  </a>
  
    <nav class="md-nav" aria-label="Protocol Architecture Risk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#messaging-protocol" class="md-nav__link">
    Messaging Protocol
  </a>
  
    <nav class="md-nav" aria-label="Messaging Protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#full-client-verification-based-bridging" class="md-nav__link">
    Full-client verification-based bridging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#light-client-verification-based-bridging" class="md-nav__link">
    Light-client verification-based bridging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#third-party-attestation-reliant-bridging" class="md-nav__link">
    Third-party attestation reliant bridging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coordination-protocols" class="md-nav__link">
    Coordination Protocols
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-bridges" class="md-nav__link">
    Token Bridges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#liquidity-networks" class="md-nav__link">
    Liquidity Networks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protocol-implementation-risk" class="md-nav__link">
    Protocol Implementation Risk
  </a>
  
    <nav class="md-nav" aria-label="Protocol Implementation Risk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mixing-of-control-and-data-plane" class="md-nav__link">
    Mixing of Control and Data Plane
  </a>
  
    <nav class="md-nav" aria-label="Mixing of Control and Data Plane">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ability-to-pause-project" class="md-nav__link">
    Ability to Pause Project
  </a>
  
    <nav class="md-nav" aria-label="Ability to Pause Project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role-based-access-control" class="md-nav__link">
    Role Based Access Control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgradable" class="md-nav__link">
    Upgradable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ability-to-ban-addresses" class="md-nav__link">
    Ability to Ban Addresses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#well-known-platform" class="md-nav__link">
    Well Known Platform
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#well-known-smart-contract-programming-language" class="md-nav__link">
    Well Known Smart Contract Programming Language
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-source-code" class="md-nav__link">
    Open Source Code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-auditing" class="md-nav__link">
    Code Auditing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verified-code-on-etherscan" class="md-nav__link">
    Verified Code on Etherscan
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formal-verification" class="md-nav__link">
    Formal Verification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-storage" class="md-nav__link">
    Secret Storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-development-maturity" class="md-nav__link">
    Product Development Maturity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protocol-operation-risk" class="md-nav__link">
    Protocol Operation Risk
  </a>
  
    <nav class="md-nav" aria-label="Protocol Operation Risk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operational-security" class="md-nav__link">
    Operational Security
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ability-to-pause" class="md-nav__link">
    Ability to Pause
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codebase-diversity" class="md-nav__link">
    Codebase Diversity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decentralization-of-operations" class="md-nav__link">
    Decentralization of Operations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-of-off-chain-systems" class="md-nav__link">
    Security of off-chain systems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vulnerability-response-plan" class="md-nav__link">
    Vulnerability Response Plan
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../comparison/comparison/" class="md-nav__link">
        Comparison
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../authors/contributions/" class="md-nav__link">
        Contributions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../faq/faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/ref/" class="md-nav__link">
        Reference
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="categories-of-risk">Categories of Risk</h1>
<p>Cross-chain protocols are generally complex systems that are exposed to numerous sources of risk. Classifying these risks enables better reasoning about the inherent limits and challenges of protocols and the considerations and mitigations of different risk factors. To this end, this section identifies four key categories of risk in cross-chain communication:</p>
<ul>
<li>
<p>Network Consensus Risk: One of the core security assumptions of cross-chain communication is that the state communicated from one network to another is valid according to the consensus rules of the underlying network. Failures in the safety or liveness properties of an underlying network can thus risk creating inconsistent state changes across chains that cannot be reconciled. Such risks are often beyond the control boundary of cross-chain infrastructure and likely represent a fundamental security limitation to bridging across independent sovereign chains. The impact of a failure of this type would simultaneously affect all bridges exposed to the underlying faulty network. However, risk controls can be enacted to limit the magnitude of such failures (e.g. containing and isolating the impact of failures in any single network).</p>
</li>
<li>
<p>Protocol Architecture Risk: As discussed in the <a href="../../01intro/introduction/">Introduction</a>, cross-chain protocols can be viewed through a layered architecture. The design assumptions and constraints under which protocols at each layer guarantee relevant security properties can be a source of significant risk. For instance, at the messaging layer, architectures that introduce new trusted parties often offer weaker guarantees than those that solely rely on the security of the underlying networks.</p>
</li>
<li>
<p>Protocol Implementation Risk: Building cross-chain protocols involves creating complex components (on-chain, off-chain) while accounting for the peculiarities and pitfalls of different programming languages, virtual machines, and runtime environments. Inevitably, such complexity increases the likelihood of bugs and vulnerabilities. This type of risk has thus far been the most common cause of bridge hacks witnessed over the last couple of years.</p>
</li>
<li>
<p>Protocol Operation Risk: The operation of a cross-chain bridge involves the management of various components, potentially by distinct actors. Such activities could include the upgrade and management of bridge smart contracts and the operation of various off-chain systems (e.g. external validator nodes). Failures and oversights in these operational activities can present a significant source of risk to protocols. Having robust, secure, decentralized, and transparent mechanisms and processes for managing such systems is crucial to ensuring the security of cross-chain bridges.</p>
</li>
</ul>
<p>The following sections review each of these areas of risk in more detail.</p>
<!-- BEGIN INCLUDE 10network/network.md -->
<h2 id="network-consensus-risk">Network Consensus Risk</h2>
<p>Cross-chain protocols enable the coordination of state changes across networks. This typically requires sending state information from a source network to one or more destination networks and performing consequent state changes. A fundamental assumption in this process is that: a) states in the source network are valid and final according to its consensus rules, and b) the underlying network can process all transactions in a timely manner.</p>
<p>From the perspective of risk in cross-chain protocols, there are at least three considerations relating to these assumptions:
1. Protocols should only communicate states that have been finalized in the source network
1. Protocol security should be resilient to network liveness failures
1. Protocols should mitigate the impact of network safety violations</p>
<h4 id="transaction-finality">Transaction Finality</h4>
<p>A transaction that is irrevocably included in a ledger is considered <em>final</em>. How finality is achieved varies across networks and can either be <em>probabilistic</em> or <em>deterministic</em>. Networks with <em>deterministic</em> finality offer absolute assurance about the state of a network after some time. In contrast, probabilistic models offer only degrees of confidence, with increasing assurance attained over time. For <em>deterministic</em> models, finality could be instantly achieved after a single block or eventually after several blocks. Networks with slower finality times increase latency in cross-chain communication, which impacts the customer experience. However, cross-chain protocols must ensure that the finality of a given state is achieved before relaying the state across chains. Cross-chain protocols, which optimize for performance and relay information across chains without sufficiently waiting for finality, risk creating inconsistencies across networks and the possible loss of a party's funds.</p>
<h4 id="network-liveness-failures">Network Liveness Failures</h4>
<p>Some cross-chain protocols rely considerably on the underlying networks processing transactions within a given period. For instance, protocols might assume that cross-chain messages or fraud proofs can be submitted within a time window. However, some consensus protocols explicitly trade-off liveness for safety under certain conditions. That is, a network can halt for extended periods in the event that a portion of its validators are offline or unreachable. Cross-chain protocols must carefully account for these scenarios in their design.</p>
<h4 id="network-safety-violations">Network Safety Violations</h4>
<p>A fundamental and systematic problem for cross-chain protocols across sovereign networks is if the ledger of the underlying network undergoes significant reorganizations and reversions. This could result from active network attacks (e.g., 51% attack), hard forks, or bugs in protocol implementations. The likelihood of such failures is higher in chains with fewer validators, lower economic security, or new consensus protocols. Such risks are often beyond the control boundary of cross-chain infrastructure and affect all cross-chain protocols connected to a network simultaneously.</p>
<p>For cross-chain protocols spanning independent networks, this likely represents a <a href="https://old.reddit.com/r/ethereum/comments/rwojtk/ama_we_are_the_efs_research_team_pt_7_07_january/hrngyk8/">fundamental security limitation</a> to the security guarantees that such protocols can offer. However, cross-chain protocols can reduce the impact of such failure by limiting contagion to other chains. If a consensus failure in one network can cascade to affect all other chains, then the security of a bridge is dependent on its weakest link. Additionally, cross-chain protocol builders should conduct adequate due diligence on the security and decentralisation properties of the networks they integrate.</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE 20architecture/architecture.md -->
<h2 id="protocol-architecture-risk">Protocol Architecture Risk</h2>
<p>Protocol architecture risks relate to the design of the cross-chain communications protocol. The major consideration is the communications protocol trust assumptions. However, other more detailed design considerations can impose important risks.</p>
<p><img alt="Cross-chain protocol stack (adapted from Socket + L2 beats framework)" src="../20architecture/protocolstack.png" /></p>
<!-- BEGIN INCLUDE messaging.md -->
<h3 id="messaging-protocol">Messaging Protocol</h3>
<p>A cross-chain messaging protocol is responsible for communicating state transition events from applications on one network to applications on another. It should guarantee that these events are valid according to the canonical ledger state of the source network (safety) and ensure that all relevant state transitions are eventually communicated to their destination network (liveness).</p>
<p>From the perspective of safety, an ideal message protocol construction would introduce no additional trust assumptions beyond what is assumed about the networks themselves. This would involve a destination network independently being able to verify that a) a state transition that resulted in a given message is valid according to the state transition rules of the source network and b) that the message has been finalized on the network as per the network consensus rules of the source.</p>
<h4 id="full-client-verification-based-bridging">Full-client verification-based bridging</h4>
<p>A full-client verification bridge involves one network validating all state transitions and consensus rules of another network, in effect achieving both properties stated above. This type of bridging retains the strongest guarantees of the underlying networks and does not introduce any additional trust assumption. However, this approach introduces significant complexities in implementation and is hard to scale across diverse ecosystems. To date, these are employed only by layer 2  chains (optimistic and ZK rollups), and not across independent L1 networks.</p>
<h4 id="light-client-verification-based-bridging">Light-client verification-based bridging</h4>
<p>In a light-client verification bridge a destination network validates that a given block header (or state aggregate), from a source network, is valid only according to the consensus rules of a network, without executing and verifying individual state transitions. While light clients offer less security compared to full-client-based approaches, they too do not introduce additional trust assumptions, beyond those of the underlying networks. Different network protocols have different light-client protocols with differing levels of security assumptions and guarantees. The security guarantees of such bridges are subject to these limitations. We distinguish between two categories of light-client bridges:</p>
<ul>
<li>On-chain light-client protocol implementations: these involve implementing the light-client protocol as a smart contract on another. Typically block headers are relayed from the source network to the smart contract on a destination network for validation. An arbitrary state in a source network can then be proved against a validated block header stored by the smart contract on the destination network. Implementing, operating, and maintaining light-client-based bridges can be difficult, expensive, or infeasible, making this difficult to apply across diverse ecosystems.</li>
<li>Validity Proof Bridges (aka ZK bridges)</li>
</ul>
<h4 id="third-party-attestation-reliant-bridging">Third-party attestation reliant bridging</h4>
<p>While the above approaches offer better security guarantees because they remove the need for additional trust assumptions, they are difficult to implement and operate across diverse ecosystems. Hence, most cross-chain protocols introduce additional sources of trust in the form of third-party attestors. In general, such models rely on trusted third parties serving as oracles that attest and relay state events occurring in a source network, to a destination network. The security models of such bridges rely on the honest behavior of such attestors, either because they are game theoretically incentivized or have their reputation at stake. We generally distinguish between three categories of such bridges, based on the security model they employ.</p>
<ul>
<li>Proof-of-Authority approaches: rely on well-known legal entities running nodes that attest to the validity of messages from one network to another. Such bridges assume that a) parties are strongly incentivized to maintain their reputation and would thus not misbehave and b) that in the event of misbehavior legal recourse could be pursued against such entities.</li>
</ul>
<p>Considerations:</p>
<ul>
<li>How many such entities are employed by the network? What are the specific honesty threshold assumptions for guaranteeing safety and liveness? What are the specific characteristics of the cryptographic schemes employed?</li>
<li>How reputable are such entities? What is the true cost of reputational damage for such entities? What is the market cap of such entities?</li>
<li>Do such entities have competing interests with users of this bridge? e.g. Trading firms that might benefit from cross-domain MEV?</li>
<li>How do the above disincentives to misbehavior compare against the TVL or total volume transacted by layers atop the messaging bridge?</li>
<li>In what jurisdictions are the entities domiciled?</li>
<li>
<p>Can these entities be coerced by regulations to censor transactions?</p>
</li>
<li>
<p>Proof-of-Stake approaches: rely on a set of parties having a financial stake in honestly relaying valid state information from one network to another.</p>
</li>
</ul>
<p>Considerations:</p>
<ul>
<li>How many such entities are employed by the network? What are the specific honesty threshold assumptions for guaranteeing safety and liveness? What are the specific characteristics of the cryptographic schemes employed?</li>
<li>How is the stake distributed across networks? (i.e. concentrated amongst few parties vs diffuse across many parties)</li>
<li>What exactly is staked by validators? Is it a bridge-specific token? What are the dynamics that drive the value of such tokens?</li>
<li>What is the cost of bribing or corrupting a threshold of such validators to violate safety or liveness?</li>
<li>
<p>How does the bridge adapt to active misbehavior by a portion of the validators?</p>
</li>
<li>
<p>Optimistic approaches - honest minority (but incentive alignment that such a minority exists)</p>
</li>
</ul>
<p>A number of protocols employ a hybrid approach, that utilizes different approaches for different legs of the cross-chain interaction.</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE coordination.md -->
<h3 id="coordination-protocols">Coordination Protocols</h3>
<p>Atomicity e.g. GPACT</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE token-bridges.md -->

<h3 id="token-bridges">Token Bridges</h3>
<p>Token bridges are protocols that enable the transfer of assets from one network 
to another. This can be enacted using either a lock-and-mint or a burn-and-mint 
mechanism. In both cases, the protocol involves minting synthetic assets on a 
destination that are claimable for a corresponding amount of underlying assets 
at a later time. The invariant such protocols must preserve is that the value 
of an asset only resides in one place at a given time and that the total 
supply of synthetic assets matches the total underlying. Scenarios in 
which either locked assets on a source network are stolen or synthetic 
assets are arbitrarily minted on a destination network, break these 
invariants. This creates a perpetual risk for token holders of 
synthetic assets, in which these assets could become worthless 
in the event of such failures.</p>
<p>Moreover, lock-and-mint token bridges in particular create 
honey pots that make them an ideal target for malicious 
actors. A significant portion of bridge hacks over the 
last couple of years has involved this source of risk.</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE liquidity-networks.md -->
<h3 id="liquidity-networks">Liquidity Networks</h3>
<p>Note: include HTLCs as a possible design approach</p>
<!-- END INCLUDE -->

<!-- END INCLUDE -->
<!-- BEGIN INCLUDE 30implementation/protocol-implementation-risk.md -->
<h2 id="protocol-implementation-risk">Protocol Implementation Risk</h2>
<p>The design of contracts and code implementation changes the risk 
profile of the project. This section discusses design features 
and then works through software development implementation risks.</p>
<!-- BEGIN INCLUDE mixing-control-data-flow.md -->
<h3 id="mixing-of-control-and-data-plane">Mixing of Control and Data Plane</h3>
<p>The terms <em>Control Plane</em> and <em>Data Plane</em> come from networking [<a href="https://en.wikipedia.org/wiki/Control_plane">Wikipedia</a>]. In the
context of networking, the Control Plane configures the network topology 
and routing tables, and the Data Plane is the information that is 
communicated across the network. In the context of computing, the 
Control Plane is the configuration of the system, and the Data Plane
is the data processing. </p>
<p>Functions in smart contracts can be ones that control the configuration 
of the contract. These can be thought of as Control Plane functions. 
For example, a function to pause the contract is a Control Plane function. 
Data Plane functions are functions that process data. For example, a 
function to mint some tokens is a Data Plane function.</p>
<p>Poor project design can result in smart contract functions that contain 
both Control Plane and Data Plane logic. Mixing these two planes in the 
one function dramatically increases the risk of the project. An attacker 
may be able to compromise the Data Plane part of a mixed processing function, 
and then use that to change the configuration of the project, accessing the 
Control Plane part of the mixed function. This can lead to the attacker 
having the ability to control aspects of the project such as minting tokens.</p>
<hr />
<h4 id="example">Example</h4>
<p>As example of this type of issue being exploited is the 
<a href="https://rekt.news/polynetwork-rekt/">August 2021 PolyNetwork issue</a>. The 
PolyNetwork code was written such that its <strong>EthCrossChainManager</strong> contract
was the owner of the <strong>EthCrossChainData</strong> contract. The <strong>EthCrossChainData</strong> 
contract held important information including the public keys used to verify
crosschain requests. Doing this allows for function calls for <strong>EthCrossChainData</strong>
to go via the <strong>EthCrossChainManager</strong> contract. Access from the <strong>EthCrossChainManager</strong> contract
to the <strong>EthCrossChainData</strong> contract could be deemed part of the Control Plane. 
The <strong>EthCrossChainManager</strong> contract also had a function 
<strong>verifyHeaderAndExecuteTx</strong> that was used to process  Data Plane requests. 
The attacker was able to create a carefully constructed call to
<strong>verifyHeaderAndExecuteTx</strong> that allowed the Data Plane request to modify
data in the <strong>EthCrossChainData</strong>, that ultimately led to the attacker being 
able to steal funds. </p>
<p>The PolyNetwork code would not have been vulnerable to this type 
of attack if there had been a clear separation of Control Plane and Data 
Plane. For example, rather than doing updates to the <strong>EthCrossChainData</strong> 
contract via the <strong>EthCrossChainManager</strong> contract, updates could have been 
only allowed from an Externally Owned Account (EOA) or a MultiSig Wallet
account.</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE pause.md -->
<h3 id="ability-to-pause-project">Ability to Pause Project</h3>
<p>All Data Plane functions should be <em>pausable</em>. For example, a bridge contract could 
have a function that could transfer coins based on actions on another blockchain. 
The ability to <em>pause</em> a function in a 
project allows administrators to stop functions from successfully 
executing. If there is a vulnerability that is being actively 
exploited in a project, having the ability to pause a function 
could stop the exploitation of the project midway through the 
attack.</p>
<p>For Ethereum based projects, the OpenZeppelin project has an example 
 contract <a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/security/Pausable.sol">Pausable.sol</a>
that can be used to implement pausing. Using this template, 
pausing a function becomes as simple as adding a modifier <code>whenNotPaused</code>. 
The code below shows how this would work in practice.</p>
<pre><code class="language-solidity">contract Example is Pausable {
    function pause() external onlyOwner {
        _pause();
    }
    function transfer(
        address _sender,
        address _tokenContract,
        address _recipient,
        uint256 _amount
    ) external whenNotPaused {
        // Only executed when not paused
</code></pre>
<p>When analyzing whether a project can be paused, it is important
to check whether all data processing functions can be paused, or
just some parts of the project. </p>
<hr />
<h4 id="example_1">Example</h4>
<p>For example, in <a href="https://medium.com/nomad-xyz-blog/nomad-bridge-hack-root-cause-analysis-875ad2e5aacd">August 2022 the Nomad Bridge</a> had an issue
(see <a href="https://rekt.news/nomad-rekt/">Rekt</a> for an analysis of the issue from 
people outside the team).
An attacker was able to determine a methodology for stealing funds using the <code>Replica</code> 
contract's <code>process()</code> function. Depite most of the Data Plane processing functions 
in the project being pausable, the <code>process()</code> function was not. This meant that the 
attack was able to proceed without the administrators of the project being able to stop it. </p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE access-control.md -->
<h3 id="role-based-access-control">Role Based Access Control</h3>
<p><a href="https://en.wikipedia.org/wiki/Role-based_access_control">Role Based Access Control (RBAC)</a> 
allows different entites to be responsible for different configuration actions. 
Systems that are managed by a single entity are inherently less secure 
than those with narrowly-scoped privileges for different entities and specific contexts.</p>
<p>With 
contracts, this can be used to limit which accounts can execute which functions. For 
example, imagine a contract that operates as a crosschain bridge. It could have a role 
called <strong>PAUSER</strong>. This role could be required to call a function that enables 
pausing of the contract. Any transaction submitted by an account that did not 
have the <strong>PAUSER</strong> role would be reverted.</p>
<p>Simplistic contracts might have a single role, <strong>OWNER</strong>, that can only be assigned
to one account. For these contracts, the <strong>owner</strong> account is the only account 
that can submit transactions that call configuration functions without reverting.</p>
<p>The greater degree of flexibility afforded by Role Based Access Control compared 
to simplistic <strong>OWNER</strong> style access control has security implications. For example, 
a contract might be able to mint new tokens, and thus have a <strong>MINTER</strong> role to control
this action. Minting new tokens could change the tokenomics of the contract, and hence 
must only be executed if there is agreement between administrators. Access to this 
configuration action might be limited to a multi-signature wallet account. The same 
contract might have a <strong>PAUSER</strong> role that can be used to stop data processing within 
the contract. The action to pause the contract needs to occur as quickly as possible,
to halt an in-progress attack. However, access to the role needs to be limited to trusted
accounts, to prevent attackers causing a Denial of Service attack on the contract, by
continually pausing the contract. Using a multi-signature wallet to control this action
is not ideal, as multiple parties would need to work together to pause the contract, thus 
allowing attacks to continue longer than they otherwise would. In this situation, 
multiple trusted accounts could be granted <strong>PAUSER</strong> role. Any one of the accounts 
could then pause the contract.</p>
<p>For a small project, when a contract is deployed, it might be tempting to use 
simplistic <strong>OWNER</strong> style access control. 
However, it is better to deploy a contract configured for fine grain
Role Based Access Control, where all roles are initially assigned to the one account.
In this way, as the project using the contract matures, new accounts can be granted
roles and the original account's access can be revoked.
It should be noted that the benefits of RBAC are only realised once 
access for different roles is allocated to additional accounts. </p>
<p>For Ethereum based projects, the OpenZeppelin project has an example
contract <a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/AccessControl.sol">AccessControl.sol</a>
that can be used to implement Role Based Access Control. Using this template,
checking an address has been granted a role becomes as simple as calling 
the function <strong>hasRole</strong>.
The code below shows how this would work in practice.</p>
<pre><code class="language-solidity">contract Example is Pausable, AccessControl {
    constructor() {
        _setupRole(DEFAULT_ADMIN_ROLE, msg.sender);
        _setupRole(PAUSER_ROLE, msg.sender);
    }

    function pause() external {
        require(hasRole(PAUSER_ROLE, msg.sender), &quot;Must have PAUSER role&quot;);
        _pause();
    }
}
</code></pre>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE upgrade.md -->
<h3 id="upgradable">Upgradable</h3>
<p>TODO: This needs some thought.</p>
<p>Upgrading can lead to rug-pulling, possibly by attackers who gain access to the address with upgrade privileges.
However, code often has bugs. Additionally, new features can be added. Hence, the ability to upgrade is important.
Are different upgrade mechanisms more and less risky?</p>
<p>Transparent proxy</p>
<p>Poor implementation where storage slots are mistakenly re-used has led to vulnerabilities.
Deploy new contract and point front end at new contract.
Non-transparent proxy with separate data contract.</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE ban-address.md -->
<h3 id="ability-to-ban-addresses">Ability to Ban Addresses</h3>
<p>Addresses may be associated with stolen funds. Tornado Cash was 
a project that had sanctions placed against it due to its 
association with stolen funds. Projects that have the 
ability to block these addresses, or freeze in-transit funds 
are more likely to avoid this type of regulatory risk.</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE known-platform.md -->
<h3 id="well-known-platform">Well Known Platform</h3>
<p>More people are likely to be able to review and understand projects 
that are created in environments that they are familiar with. The 
majority of the blockchain developers in the world understand 
Ethereum and the Ethereum Virtual Machine (EVM). Hence, projects 
that use blockchains that support the EVM, or that are forks or 
Ethereum, are inherently less risky than projects that involve 
other blockchains.</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE known-language.md -->
<h3 id="well-known-smart-contract-programming-language">Well Known Smart Contract Programming Language</h3>
<p>More people are likely to be able to review and understand code 
that has been created in programming languages that they are 
familiar with. Solidity is the smart contract programming 
language known by most blockchain developers. Hence, projects 
that use Solidity are inherently less risky than projects that 
use other smart contract programming languages.</p>
<p>Solidity Assembler can be used to implement complex features not 
available in standard Solidity. Assembler code is more complex 
than Solidity code and is more likely to contain bugs and have 
unexpected consequences.</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE open-source.md -->
<h3 id="open-source-code">Open Source Code</h3>
<p>If the code is stored in a public Github repository, it allows people 
to review the code and the test system. If many people view the code, 
then it is likely that defects in the code will be found. Additionally, 
it allows for the assessment of such things as the number of tests.</p>
<p>Some people argue that a private Github repository is more secure, 
believing that issues can be hidden from attackers. However, 
attackers who are sufficiently motivated often obtain access 
of private repository or to a copy of the code, and are then 
able to exploit any vulnerabilities. Not having the repository 
public then hinders white hat developers from helping, in the 
case of an attack.</p>
<p>When using a public repository, it is important that issues that 
relate to vulnerabilities and code fixes for vulnerabilities are 
not put on the public repository before a release including the 
vulnerability fix has been deployed. Not doing this equates to 
publishing vulnerabilities that can be used to exploit the 
project. The approach that should be taken is to review and 
test the vulnerability fix using the private repo, deploy 
from the private repo, and the push the fix to the public 
repo. </p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE audit.md -->
<h3 id="code-auditing">Code Auditing</h3>
<p>TODO: This section needs to be re-worked.</p>
<p>Has the code been audited?</p>
<p>Have the deployed version audited?</p>
<p>A source of risk is that a version of the code has been audited, but that
the code deployed has not been audited. </p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE verified-code.md -->
<h3 id="verified-code-on-etherscan">Verified Code on Etherscan</h3>
<p>All deployed contracts should have the source code uploaded using 
the Etherscan verified code tool, or similar tools for other blockchains. 
Not being able to determine what code have been deployed reduces the trust 
stakeholders have in the project. </p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE testing.md -->
<h3 id="testing">Testing</h3>
<p>Code that is not tested is far more likely to contain bugs 
than code that has been tested. Comprehensive tests allow 
new features to be added without fear of breaking existing 
functionality. Hence, the more comprehensive the testing of 
the project, the less risky the project is. </p>
<p>TODO: discuss continuous integration</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE formal-verification.md -->
<h3 id="formal-verification">Formal Verification</h3>
<p>Formally verified code should prove that the code matches the 
specification. Hence, formal verification can not detect bugs 
in the design of the project. However, it will pick-up 
implementation bugs that testing might miss.</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE documentation.md -->
<h3 id="documentation">Documentation</h3>
<p>More documentation makes a project easier to analyze. A lack 
of documentation can lead to confusion and issues being 
missed. Projects that have good documentation are easier 
to maintain.</p>
<p>Types of documentation a good project should have are:</p>
<ul>
<li>Architecture document that includes the component and deployment architecture.</li>
<li>Thread model that includes all parts of the project.</li>
<li>Sequence diagrams for all major data flows.</li>
<li>Test plan describing how the project will be tested.</li>
<li>Smart contract code comments at the contract and function level.</li>
<li>Off-chain code with comments at the class and method level.</li>
<li>Test code with at least a class level comment.</li>
</ul>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE secret-storage.md -->
<h3 id="secret-storage">Secret Storage</h3>
<p>Most projects use cryptographic keys to operate the system. 
These keys could be stored in a network HSM or a hardware 
wallet, and not in a file on disk on a server. </p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE maturity.md -->
<h3 id="product-development-maturity">Product Development Maturity</h3>
<p>TODO: Software Development Lifecycle (SDLC)</p>
<!-- END INCLUDE -->

<!-- END INCLUDE -->
<!-- BEGIN INCLUDE 40operation/protocol-operation-risk.md -->
<h2 id="protocol-operation-risk">Protocol Operation Risk</h2>
<!-- BEGIN INCLUDE operational-security.md -->
<h3 id="operational-security">Operational Security</h3>
<p>TODO: Discuss security posture and how is applies.</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE ability-pause.md -->
<h3 id="ability-to-pause">Ability to Pause</h3>
<p>If pausing is controlled by a multi-sig, then there is the risk 
that not enough parties can be gathered quickly enough to pause 
the project.</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE diversity-code.md -->
<h3 id="codebase-diversity">Codebase Diversity</h3>
<p>Is there just one implementation, or have multiple parties implemented the protocol?</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE decentralization.md -->
<h3 id="decentralization-of-operations">Decentralization of Operations</h3>
<p>Is there a single operator of off-chain components, or are many parties involved?</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE offchain-security.md -->
<h3 id="security-of-off-chain-systems">Security of off-chain systems</h3>
<p>TODO</p>
<p>(e.g. validators)
Standard security practices such as ISO27001</p>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE vulnerability.md -->
<h3 id="vulnerability-response-plan">Vulnerability Response Plan</h3>
<p>Is there a vulnerability response plan?</p>
<p>Is there a methodology for deploying an upgrade prior to committing code to a public github repo?</p>
<!-- END INCLUDE -->

<!-- END INCLUDE -->

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 14, 2022</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 14, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../10stakeholders/stakeholders/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Stakeholders" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Stakeholders
            </div>
          </div>
        </a>
      
      
        
        <a href="../../../comparison/comparison/" class="md-footer__link md-footer__link--next" aria-label="Next: Comparison" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Comparison
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "toc.integrate", "toc.follow"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>